# 🎬 本地测试已准备就绪！

## ✅ 已创建的测试工具

### 📁 新增文件

1. **`test_menu.bat`** - 交互式测试菜单 (推荐使用)
2. **`simple_test.js`** - 4秒快速测试
3. **`test_configs.js`** - 多平台/多时长配置测试
4. **`quick_test.bat`** - 快速测试批处理
5. **`local_test_guide.md`** - 详细测试指南
6. **`README_TEST.md`** - 测试工具总览

### 📝 已有文件

- **`test_prison_battle.js`** - 《狱国争霸》12秒完整测试
- **`run_prison_test.bat`** - 完整测试批处理
- **`INSTALL.bat`** - 依赖安装脚本

## 🚀 快速开始

### 推荐方式 (最简单)

1. **双击 `test_menu.bat`**
2. 选择测试选项 (建议先选 1 - 快速测试)
3. 等待视频生成 (约 30-120 秒)
4. 复制视频链接到浏览器查看

### 命令行方式

```bash
# 进入目录
cd C:\Users\jojo1\jilo-ai\game-video-gen

# 安装依赖 (如果还没安装)
npm install

# 运行快速测试
node simple_test.js

# 或运行完整测试
node test_prison_battle.js
```

## 📊 测试选项

| 选项 | 时长 | 平台 | 格式 | 成本 | 耗时 |
|------|------|------|------|------|------|
| 快速测试 | 4秒 | 通用 | 9:16 | ~$0.10 | 30-60秒 |
| 抖音测试 | 8秒 | 抖音 | 9:16 | ~$0.18 | 60-90秒 |
| 快手测试 | 4秒 | 快手 | 9:16 | ~$0.10 | 30-60秒 |
| YouTube测试 | 12秒 | YouTube | 16:9 | ~$0.25 | 90-120秒 |
| 完整测试 | 12秒 | 抖音 | 9:16 | ~$0.25 | 90-120秒 |

## 🎯 测试目的

根据 PRD 文档,这些测试验证:

✅ **核心功能**
- FAL.AI SORA2 API 集成
- 多时长支持 (4/8/12秒)
- 多格式支持 (9:16/16:9)
- 音频自动生成和同步

✅ **平台适配**
- 抖音: 快节奏、强冲击力
- 快手: 真实接地气
- YouTube: 精良制作

✅ **质量验证**
- 视频分辨率 (1080p)
- 音频质量
- 文件格式 (MP4)

## 📝 测试步骤

### 第一次测试 (推荐)

1. **准备环境**
   ```bash
   node --version  # 确认 Node.js 已安装
   ```

2. **安装依赖**
   - 双击 `INSTALL.bat`
   - 或运行 `npm install`

3. **运行快速测试**
   - 双击 `test_menu.bat` 并选择选项 1
   - 或运行 `node simple_test.js`

4. **查看结果**
   - 复制控制台输出的视频 URL
   - 在浏览器中打开
   - 确认视频可以播放

### 完整测试流程

1. ✅ 快速测试 (4秒) - 验证 API 正常
2. ✅ 抖音测试 (8秒) - 验证竖屏效果
3. ✅ YouTube测试 (12秒) - 验证横屏效果
4. ✅ 完整测试 (12秒) - 验证游戏内容

## 🎬 预期结果

成功后会看到:

```
╔════════════════════════════════════════════════════════════╗
║     抖音小游戏《狱国争霸》推广视频生成测试                    ║
║     FAL.AI SORA2 - 12秒竖屏视频                            ║
╚════════════════════════════════════════════════════════════╝

🎮 游戏名称: 狱国争霸
📱 平台: 抖音小游戏
⏱️  视频时长: 12秒
📐 视频比例: 9:16

⏳ 正在生成视频，预计需要 1-2 分钟...

[45s] 📊 Generating video frames...
[78s] 📊 Processing audio...
[92s] ✨ 视频生成完成！

✅ 生成成功！总耗时: 95.42秒

📹 视频信息:
   - 视频URL: https://v3.fal.media/files/...
   - 文件大小: 3.24 MB
   - 视频时长: 12秒
   - 视频比例: 9:16

🔗 视频下载链接:
   https://v3.fal.media/files/...
```

## ❓ 常见问题

### Q1: 如何选择测试选项?

**A**: 首次测试建议使用"快速测试"(4秒):
- 成本最低 (~$0.10)
- 速度最快 (30-60秒)
- 可以快速验证 API 是否正常

### Q2: 视频生成需要多久?

**A**: 取决于时长:
- 4秒: 约 30-60秒
- 8秒: 约 60-90秒
- 12秒: 约 90-120秒

### Q3: 生成失败怎么办?

**A**: 检查以下几点:
1. 网络连接是否正常
2. API Key 是否有效
3. FAL.AI 服务是否正常: https://status.fal.ai/
4. 是否有足够的配额

### Q4: 如何下载生成的视频?

**A**: 两种方式:
1. 直接点击视频链接在浏览器中打开
2. 右键视频 -> "视频另存为"

### Q5: 视频链接有效期多久?

**A**: 24小时,建议及时下载保存

## 🔧 故障排查

### 错误: `Cannot find module`
```bash
npm install
```

### 错误: `Unauthorized`
检查 API Key 是否正确

### 错误: `ECONNREFUSED`
检查网络连接,可能需要 VPN

### 错误: `Generation failed`
- 检查 FAL.AI 服务状态
- 尝试更短的时长
- 稍后重试

## 📚 更多信息

- **详细指南**: 查看 `local_test_guide.md`
- **测试工具说明**: 查看 `README_TEST.md`
- **PRD 文档**: 查看 `jilo-ai_game-video-gen_PRD_V1_0_MVP_REVISED.md`

## 🎯 下一步

测试成功后,你可以:

1. ✅ 验证 API 功能正常
2. ✅ 了解生成时间和成本
3. ✅ 确认视频质量符合预期
4. ⏭️ 开始开发完整的 Web 应用
5. ⏭️ 集成 OpenAI 生成脚本
6. ⏭️ 添加用户界面和数据库

## 💡 温馨提示

- 所有测试脚本都已配置好 API Key
- 第一次测试建议使用 4秒快速测试
- 生成的视频请及时下载保存
- 测试时注意成本控制

---

**准备就绪! 🎉**

现在你可以:
1. 双击 `test_menu.bat` 开始测试
2. 或运行 `node simple_test.js` 快速验证

祝测试顺利! 🚀
